<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">



<title>Numbers in engineering format</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>

</head>

<body>




<h1 class="title toc-ignore">Numbers in engineering format</h1>



<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>Packages used in this vignette.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">library</span>(knitr)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw">library</span>(docxtools)</a></code></pre></div>
<p>This vignette demonstrates the use of two functions from the <em>docxtools</em> package:</p>
<ul>
<li><code>format_engr()</code> for formatting numbers in engineering notation<br />
</li>
<li><code>align_pander()</code> for aligning table columns using a simple pander table style</li>
</ul>
<p>The primary goal of <code>format_engr()</code> is to present numeric variables in a data frame in <em>engineering format</em>, that is, scientific notation with exponents that are multiples of 3. Compare:</p>
<table>
<thead>
<tr class="header">
<th>syntax</th>
<th>expression</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>computer</td>
<td><span class="math inline">\(1.011E+5\)</span></td>
</tr>
<tr class="even">
<td>mathematical</td>
<td><span class="math inline">\(1.011\times10^{5}\)</span></td>
</tr>
<tr class="odd">
<td>engineering</td>
<td><span class="math inline">\(101.1\times10^{3}\)</span></td>
</tr>
</tbody>
</table>
</div>
<div id="format_engr" class="section level2">
<h2>format_engr()</h2>
<p>This example uses a small data set, <code>density</code>, included with docxtools, with temperature in K, pressure in Pa, the gas constant in J kg<sup>-1</sup>K<sup>-1</sup>, and density in kg m<sup>-3</sup>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">density</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co">#&gt;         date trial    T_K   p_Pa   R  density</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; 1 2018-06-12     a 294.05 101100 287 1.197976</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; 2 2018-06-13     b 294.15 101000 287 1.196384</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt; 3 2018-06-14     c 294.65 101100 287 1.195536</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt; 4 2018-06-15     d 293.35 101000 287 1.199647</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt; 5 2018-06-16     e 293.85 101100 287 1.198791</span></a></code></pre></div>
<p>Four of the variables are numeric. The <code>date</code> variable is of type “double” but class “Date”, so it is not reformatted.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">map_chr</span>(density, class)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt;        date       trial         T_K        p_Pa           R     density </span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt;      &quot;Date&quot; &quot;character&quot;   &quot;numeric&quot;   &quot;numeric&quot;   &quot;numeric&quot;   &quot;numeric&quot;</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="kw">map_chr</span>(density, typeof)</a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt;        date       trial         T_K        p_Pa           R     density </span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt;    &quot;double&quot; &quot;character&quot;    &quot;double&quot;    &quot;double&quot;    &quot;double&quot;    &quot;double&quot;</span></a></code></pre></div>
<p>Usage is <code>format_engr(x, sigdig = NULL, ambig_0_adj = FALSE)</code>. The function returns a data frame with all numeric values reformatted as character strings in engineering format with math delimiters <code>$...$</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">density_engr &lt;-<span class="st"> </span><span class="kw">format_engr</span>(density)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">density_engr</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt;         date trial     T_K                    p_Pa       R density</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt; 1 2018-06-12     a $294.0$ ${101.1}\\times 10^{3}$ $287.0$ $1.198$</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt; 2 2018-06-13     b $294.2$ ${101.0}\\times 10^{3}$ $287.0$ $1.196$</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt; 3 2018-06-14     c $294.6$ ${101.1}\\times 10^{3}$ $287.0$ $1.196$</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt; 4 2018-06-15     d $293.4$ ${101.0}\\times 10^{3}$ $287.0$ $1.200$</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt; 5 2018-06-16     e $293.8$ ${101.1}\\times 10^{3}$ $287.0$ $1.199$</span></a></code></pre></div>
<p>The formerly numeric variables are now characters. Non-numeric variables are returned unaltered.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">map_chr</span>(density_engr, class)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co">#&gt;        date       trial         T_K        p_Pa           R     density </span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">#&gt;      &quot;Date&quot; &quot;character&quot; &quot;character&quot; &quot;character&quot; &quot;character&quot; &quot;character&quot;</span></a></code></pre></div>
<p>The math formatting is applied when the data frame is printed in the output document. For example, we can use <code>knitr::kable()</code> to print the formatted data.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">kable</span>(density_engr)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">date</th>
<th align="left">trial</th>
<th align="left">T_K</th>
<th align="left">p_Pa</th>
<th align="left">R</th>
<th align="left">density</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2018-06-12</td>
<td align="left">a</td>
<td align="left"><span class="math inline">\(294.0\)</span></td>
<td align="left"><span class="math inline">\({101.1}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287.0\)</span></td>
<td align="left"><span class="math inline">\(1.198\)</span></td>
</tr>
<tr class="even">
<td align="left">2018-06-13</td>
<td align="left">b</td>
<td align="left"><span class="math inline">\(294.2\)</span></td>
<td align="left"><span class="math inline">\({101.0}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287.0\)</span></td>
<td align="left"><span class="math inline">\(1.196\)</span></td>
</tr>
<tr class="odd">
<td align="left">2018-06-14</td>
<td align="left">c</td>
<td align="left"><span class="math inline">\(294.6\)</span></td>
<td align="left"><span class="math inline">\({101.1}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287.0\)</span></td>
<td align="left"><span class="math inline">\(1.196\)</span></td>
</tr>
<tr class="even">
<td align="left">2018-06-15</td>
<td align="left">d</td>
<td align="left"><span class="math inline">\(293.4\)</span></td>
<td align="left"><span class="math inline">\({101.0}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287.0\)</span></td>
<td align="left"><span class="math inline">\(1.200\)</span></td>
</tr>
<tr class="odd">
<td align="left">2018-06-16</td>
<td align="left">e</td>
<td align="left"><span class="math inline">\(293.8\)</span></td>
<td align="left"><span class="math inline">\({101.1}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287.0\)</span></td>
<td align="left"><span class="math inline">\(1.199\)</span></td>
</tr>
</tbody>
</table>
<p>The function is compatible with the pipe operator.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">density_engr &lt;-<span class="st"> </span>density <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="st">  </span><span class="kw">format_engr</span>()</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="kw">kable</span>(density_engr)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">date</th>
<th align="left">trial</th>
<th align="left">T_K</th>
<th align="left">p_Pa</th>
<th align="left">R</th>
<th align="left">density</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2018-06-12</td>
<td align="left">a</td>
<td align="left"><span class="math inline">\(294.0\)</span></td>
<td align="left"><span class="math inline">\({101.1}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287.0\)</span></td>
<td align="left"><span class="math inline">\(1.198\)</span></td>
</tr>
<tr class="even">
<td align="left">2018-06-13</td>
<td align="left">b</td>
<td align="left"><span class="math inline">\(294.2\)</span></td>
<td align="left"><span class="math inline">\({101.0}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287.0\)</span></td>
<td align="left"><span class="math inline">\(1.196\)</span></td>
</tr>
<tr class="odd">
<td align="left">2018-06-14</td>
<td align="left">c</td>
<td align="left"><span class="math inline">\(294.6\)</span></td>
<td align="left"><span class="math inline">\({101.1}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287.0\)</span></td>
<td align="left"><span class="math inline">\(1.196\)</span></td>
</tr>
<tr class="even">
<td align="left">2018-06-15</td>
<td align="left">d</td>
<td align="left"><span class="math inline">\(293.4\)</span></td>
<td align="left"><span class="math inline">\({101.0}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287.0\)</span></td>
<td align="left"><span class="math inline">\(1.200\)</span></td>
</tr>
<tr class="odd">
<td align="left">2018-06-16</td>
<td align="left">e</td>
<td align="left"><span class="math inline">\(293.8\)</span></td>
<td align="left"><span class="math inline">\({101.1}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287.0\)</span></td>
<td align="left"><span class="math inline">\(1.199\)</span></td>
</tr>
</tbody>
</table>
<p>Comments:</p>
<ul>
<li>as illustrated by the temperature column, scientific notation is omitted when the exponent is 0, 1, or 2</li>
<li>trailing zeros after a decimal point are significant</li>
</ul>
</div>
<div id="significant-digits" class="section level2">
<h2>Significant digits</h2>
<p><code>format_engr()</code> has three arguments:</p>
<ul>
<li><code>x</code>, a data frame with at least one numerical variable.</li>
<li><code>sigdig</code>, an optional vector of significant digits. Default is 4.</li>
<li><code>ambig_0_adj</code>, an optional logical to adjust the notation in the event of ambiguous trailing zeros. Default is FALSE.</li>
</ul>
<p>The <code>sigdig</code> argument can be a single value, applied to all numeric columns.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">density_engr &lt;-<span class="st"> </span><span class="kw">format_engr</span>(density, <span class="dt">sigdig =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw">kable</span>(density_engr)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">date</th>
<th align="left">trial</th>
<th align="left">T_K</th>
<th align="left">p_Pa</th>
<th align="left">R</th>
<th align="left">density</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2018-06-12</td>
<td align="left">a</td>
<td align="left"><span class="math inline">\(294\)</span></td>
<td align="left"><span class="math inline">\({101}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.20\)</span></td>
</tr>
<tr class="even">
<td align="left">2018-06-13</td>
<td align="left">b</td>
<td align="left"><span class="math inline">\(294\)</span></td>
<td align="left"><span class="math inline">\({101}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.20\)</span></td>
</tr>
<tr class="odd">
<td align="left">2018-06-14</td>
<td align="left">c</td>
<td align="left"><span class="math inline">\(295\)</span></td>
<td align="left"><span class="math inline">\({101}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.20\)</span></td>
</tr>
<tr class="even">
<td align="left">2018-06-15</td>
<td align="left">d</td>
<td align="left"><span class="math inline">\(293\)</span></td>
<td align="left"><span class="math inline">\({101}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.20\)</span></td>
</tr>
<tr class="odd">
<td align="left">2018-06-16</td>
<td align="left">e</td>
<td align="left"><span class="math inline">\(294\)</span></td>
<td align="left"><span class="math inline">\({101}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.20\)</span></td>
</tr>
</tbody>
</table>
<p>Alternatively, significant digits can be assigned to every numeric column. A zero returns the variable in its original form.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">density_engr &lt;-<span class="st"> </span><span class="kw">format_engr</span>(density, <span class="dt">sigdig =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">0</span>, <span class="dv">5</span>))</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw">kable</span>(density_engr)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">date</th>
<th align="left">trial</th>
<th align="left">T_K</th>
<th align="left">p_Pa</th>
<th align="left">R</th>
<th align="left">density</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2018-06-12</td>
<td align="left">a</td>
<td align="left"><span class="math inline">\(294.05\)</span></td>
<td align="left"><span class="math inline">\({101.1}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.1980\)</span></td>
</tr>
<tr class="even">
<td align="left">2018-06-13</td>
<td align="left">b</td>
<td align="left"><span class="math inline">\(294.15\)</span></td>
<td align="left"><span class="math inline">\({101.0}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.1964\)</span></td>
</tr>
<tr class="odd">
<td align="left">2018-06-14</td>
<td align="left">c</td>
<td align="left"><span class="math inline">\(294.65\)</span></td>
<td align="left"><span class="math inline">\({101.1}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.1955\)</span></td>
</tr>
<tr class="even">
<td align="left">2018-06-15</td>
<td align="left">d</td>
<td align="left"><span class="math inline">\(293.35\)</span></td>
<td align="left"><span class="math inline">\({101.0}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.1996\)</span></td>
</tr>
<tr class="odd">
<td align="left">2018-06-16</td>
<td align="left">e</td>
<td align="left"><span class="math inline">\(293.85\)</span></td>
<td align="left"><span class="math inline">\({101.1}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.1988\)</span></td>
</tr>
</tbody>
</table>
</div>
<div id="ambiguous-trailing-zeros" class="section level2">
<h2>Ambiguous trailing zeros</h2>
<p>Subset the data to look at just the numerical variables.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">x &lt;-<span class="st"> </span>density <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(T_K, p_Pa, R, density)</a></code></pre></div>
<p>Print the data with incrementally decreasing significant digits.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw">kable</span>(<span class="kw">format_engr</span>(x, <span class="dt">sigdig =</span> <span class="dv">4</span>), <span class="dt">caption =</span> <span class="st">&quot;4 digits&quot;</span>)</a></code></pre></div>
<table>
<caption>4 digits</caption>
<thead>
<tr class="header">
<th align="left">T_K</th>
<th align="left">p_Pa</th>
<th align="left">R</th>
<th align="left">density</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><span class="math inline">\(294.0\)</span></td>
<td align="left"><span class="math inline">\({101.1}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287.0\)</span></td>
<td align="left"><span class="math inline">\(1.198\)</span></td>
</tr>
<tr class="even">
<td align="left"><span class="math inline">\(294.2\)</span></td>
<td align="left"><span class="math inline">\({101.0}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287.0\)</span></td>
<td align="left"><span class="math inline">\(1.196\)</span></td>
</tr>
<tr class="odd">
<td align="left"><span class="math inline">\(294.6\)</span></td>
<td align="left"><span class="math inline">\({101.1}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287.0\)</span></td>
<td align="left"><span class="math inline">\(1.196\)</span></td>
</tr>
<tr class="even">
<td align="left"><span class="math inline">\(293.4\)</span></td>
<td align="left"><span class="math inline">\({101.0}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287.0\)</span></td>
<td align="left"><span class="math inline">\(1.200\)</span></td>
</tr>
<tr class="odd">
<td align="left"><span class="math inline">\(293.8\)</span></td>
<td align="left"><span class="math inline">\({101.1}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287.0\)</span></td>
<td align="left"><span class="math inline">\(1.199\)</span></td>
</tr>
</tbody>
</table>
<p>Three digits creates no ambiguity.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw">kable</span>(<span class="kw">format_engr</span>(x, <span class="dt">sigdig =</span> <span class="dv">3</span>), <span class="dt">caption =</span> <span class="st">&quot;3 digits&quot;</span>)</a></code></pre></div>
<table>
<caption>3 digits</caption>
<thead>
<tr class="header">
<th align="left">T_K</th>
<th align="left">p_Pa</th>
<th align="left">R</th>
<th align="left">density</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><span class="math inline">\(294\)</span></td>
<td align="left"><span class="math inline">\({101}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.20\)</span></td>
</tr>
<tr class="even">
<td align="left"><span class="math inline">\(294\)</span></td>
<td align="left"><span class="math inline">\({101}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.20\)</span></td>
</tr>
<tr class="odd">
<td align="left"><span class="math inline">\(295\)</span></td>
<td align="left"><span class="math inline">\({101}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.20\)</span></td>
</tr>
<tr class="even">
<td align="left"><span class="math inline">\(293\)</span></td>
<td align="left"><span class="math inline">\({101}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.20\)</span></td>
</tr>
<tr class="odd">
<td align="left"><span class="math inline">\(294\)</span></td>
<td align="left"><span class="math inline">\({101}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.20\)</span></td>
</tr>
</tbody>
</table>
<p>With 2 digits, we have three columns with ambiguous trailing zeros.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">kable</span>(<span class="kw">format_engr</span>(x, <span class="dt">sigdig =</span> <span class="dv">2</span>), <span class="dt">caption =</span> <span class="st">&quot;2 digits&quot;</span>)</a></code></pre></div>
<table>
<caption>2 digits</caption>
<thead>
<tr class="header">
<th align="left">T_K</th>
<th align="left">p_Pa</th>
<th align="left">R</th>
<th align="left">density</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><span class="math inline">\(290\)</span></td>
<td align="left"><span class="math inline">\({100}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(290\)</span></td>
<td align="left"><span class="math inline">\(1.2\)</span></td>
</tr>
<tr class="even">
<td align="left"><span class="math inline">\(290\)</span></td>
<td align="left"><span class="math inline">\({100}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(290\)</span></td>
<td align="left"><span class="math inline">\(1.2\)</span></td>
</tr>
<tr class="odd">
<td align="left"><span class="math inline">\(290\)</span></td>
<td align="left"><span class="math inline">\({100}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(290\)</span></td>
<td align="left"><span class="math inline">\(1.2\)</span></td>
</tr>
<tr class="even">
<td align="left"><span class="math inline">\(290\)</span></td>
<td align="left"><span class="math inline">\({100}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(290\)</span></td>
<td align="left"><span class="math inline">\(1.2\)</span></td>
</tr>
<tr class="odd">
<td align="left"><span class="math inline">\(290\)</span></td>
<td align="left"><span class="math inline">\({100}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(290\)</span></td>
<td align="left"><span class="math inline">\(1.2\)</span></td>
</tr>
</tbody>
</table>
<p>By setting the <code>ambig_0_adj</code> argument to TRUE, scientific notation is used to remove the ambiguity.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw">kable</span>(<span class="kw">format_engr</span>(x, <span class="dt">sigdig =</span> <span class="dv">2</span>, <span class="dt">ambig_0_adj =</span> <span class="ot">TRUE</span>), <span class="dt">caption =</span> <span class="st">&quot;Removing ambiguity&quot;</span>)</a></code></pre></div>
<table>
<caption>Removing ambiguity</caption>
<thead>
<tr class="header">
<th align="left">T_K</th>
<th align="left">p_Pa</th>
<th align="left">R</th>
<th align="left">density</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><span class="math inline">\({0.29}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\({0.10}\times 10^{6}\)</span></td>
<td align="left"><span class="math inline">\({0.29}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(1.2\)</span></td>
</tr>
<tr class="even">
<td align="left"><span class="math inline">\({0.29}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\({0.10}\times 10^{6}\)</span></td>
<td align="left"><span class="math inline">\({0.29}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(1.2\)</span></td>
</tr>
<tr class="odd">
<td align="left"><span class="math inline">\({0.29}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\({0.10}\times 10^{6}\)</span></td>
<td align="left"><span class="math inline">\({0.29}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(1.2\)</span></td>
</tr>
<tr class="even">
<td align="left"><span class="math inline">\({0.29}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\({0.10}\times 10^{6}\)</span></td>
<td align="left"><span class="math inline">\({0.29}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(1.2\)</span></td>
</tr>
<tr class="odd">
<td align="left"><span class="math inline">\({0.29}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\({0.10}\times 10^{6}\)</span></td>
<td align="left"><span class="math inline">\({0.29}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(1.2\)</span></td>
</tr>
</tbody>
</table>
<p>The ambiguous trailing zero adjustment is applied only to those variables for which the condition exists. For example, if the pressure were known to only 2 digits, it is the only variable with ambiguous trailing zeros.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw">kable</span>(<span class="kw">format_engr</span>(x, <span class="dt">sigdig =</span> <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">3</span>), <span class="dt">ambig_0_adj =</span> <span class="ot">FALSE</span>))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">T_K</th>
<th align="left">p_Pa</th>
<th align="left">R</th>
<th align="left">density</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><span class="math inline">\(294.0\)</span></td>
<td align="left"><span class="math inline">\({100}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.20\)</span></td>
</tr>
<tr class="even">
<td align="left"><span class="math inline">\(294.2\)</span></td>
<td align="left"><span class="math inline">\({100}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.20\)</span></td>
</tr>
<tr class="odd">
<td align="left"><span class="math inline">\(294.6\)</span></td>
<td align="left"><span class="math inline">\({100}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.20\)</span></td>
</tr>
<tr class="even">
<td align="left"><span class="math inline">\(293.4\)</span></td>
<td align="left"><span class="math inline">\({100}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.20\)</span></td>
</tr>
<tr class="odd">
<td align="left"><span class="math inline">\(293.8\)</span></td>
<td align="left"><span class="math inline">\({100}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.20\)</span></td>
</tr>
</tbody>
</table>
<p>With <code>ambig_0_adj = TRUE</code>, only the pressure variable has a reformatted power of ten.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw">kable</span>(<span class="kw">format_engr</span>(x, <span class="dt">sigdig =</span> <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">3</span>), <span class="dt">ambig_0_adj =</span> <span class="ot">TRUE</span>))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">T_K</th>
<th align="left">p_Pa</th>
<th align="left">R</th>
<th align="left">density</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><span class="math inline">\(294.0\)</span></td>
<td align="left"><span class="math inline">\({0.10}\times 10^{6}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.20\)</span></td>
</tr>
<tr class="even">
<td align="left"><span class="math inline">\(294.2\)</span></td>
<td align="left"><span class="math inline">\({0.10}\times 10^{6}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.20\)</span></td>
</tr>
<tr class="odd">
<td align="left"><span class="math inline">\(294.6\)</span></td>
<td align="left"><span class="math inline">\({0.10}\times 10^{6}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.20\)</span></td>
</tr>
<tr class="even">
<td align="left"><span class="math inline">\(293.4\)</span></td>
<td align="left"><span class="math inline">\({0.10}\times 10^{6}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.20\)</span></td>
</tr>
<tr class="odd">
<td align="left"><span class="math inline">\(293.8\)</span></td>
<td align="left"><span class="math inline">\({0.10}\times 10^{6}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.20\)</span></td>
</tr>
</tbody>
</table>
</div>
<div id="align_pander" class="section level2">
<h2>align_pander()</h2>
<p>This function uses <code>pander()</code> to print a table and <code>panderOptions('table.alignment.default')</code> to align columns. Usage is: <code>align_pander(x, align_idx = NULL, caption = NULL)</code></p>
<ul>
<li><code>x</code> is the data frame</li>
<li><code>align_idx</code> is a string comprised of any combination of “r”, “l”, and “c” The default alignments are numeric right and everything else left</li>
<li><code>caption</code> is an optional string used as the <code>pander()</code> caption argument</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw">align_pander</span>(density_engr)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">date</th>
<th align="left">trial</th>
<th align="left">T_K</th>
<th align="left">p_Pa</th>
<th align="left">R</th>
<th align="left">density</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2018-06-12</td>
<td align="left">a</td>
<td align="left"><span class="math inline">\(294.05\)</span></td>
<td align="left"><span class="math inline">\({101.1}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.1980\)</span></td>
</tr>
<tr class="even">
<td align="left">2018-06-13</td>
<td align="left">b</td>
<td align="left"><span class="math inline">\(294.15\)</span></td>
<td align="left"><span class="math inline">\({101.0}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.1964\)</span></td>
</tr>
<tr class="odd">
<td align="left">2018-06-14</td>
<td align="left">c</td>
<td align="left"><span class="math inline">\(294.65\)</span></td>
<td align="left"><span class="math inline">\({101.1}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.1955\)</span></td>
</tr>
<tr class="even">
<td align="left">2018-06-15</td>
<td align="left">d</td>
<td align="left"><span class="math inline">\(293.35\)</span></td>
<td align="left"><span class="math inline">\({101.0}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.1996\)</span></td>
</tr>
<tr class="odd">
<td align="left">2018-06-16</td>
<td align="left">e</td>
<td align="left"><span class="math inline">\(293.85\)</span></td>
<td align="left"><span class="math inline">\({101.1}\times 10^{3}\)</span></td>
<td align="left"><span class="math inline">\(287\)</span></td>
<td align="left"><span class="math inline">\(1.1988\)</span></td>
</tr>
</tbody>
</table>
<p>Finally, the heading can be edited for presentation.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw">names</span>(density_engr) &lt;-<span class="st"> </span><span class="kw">c</span>(</a>
<a class="sourceLine" id="cb18-2" data-line-number="2">  <span class="st">&quot;Date&quot;</span>,</a>
<a class="sourceLine" id="cb18-3" data-line-number="3">  <span class="st">&quot;Trial&quot;</span>,</a>
<a class="sourceLine" id="cb18-4" data-line-number="4">  <span class="st">&quot;Temp (K)&quot;</span>,</a>
<a class="sourceLine" id="cb18-5" data-line-number="5">  <span class="st">&quot;Press (Pa)&quot;</span>,</a>
<a class="sourceLine" id="cb18-6" data-line-number="6">  <span class="st">&quot;R (J kg^-1^K^-1^)&quot;</span>,</a>
<a class="sourceLine" id="cb18-7" data-line-number="7">  <span class="st">&quot;$</span><span class="ch">\\</span><span class="st">rho$ (kg/m^3^)&quot;</span></a>
<a class="sourceLine" id="cb18-8" data-line-number="8">)</a></code></pre></div>
<ul>
<li>backslashes have to be escaped, hence <code>\\rho</code></li>
<li>superscripts like m<sup>3</sup> in R Markdown are produced with <code>m^3^</code></li>
</ul>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw">align_pander</span>(density_engr, <span class="st">&quot;lccccc&quot;</span>, <span class="dt">caption =</span> <span class="st">&quot;Air density measurements&quot;</span>)</a></code></pre></div>
<table>
<caption>Air density measurements</caption>
<thead>
<tr class="header">
<th align="left">Date</th>
<th align="center">Trial</th>
<th align="center">Temp (K)</th>
<th align="center">Press (Pa)</th>
<th align="center">R (J kg<sup>-1</sup>K<sup>-1</sup>)</th>
<th align="center"><span class="math inline">\(\rho\)</span> (kg/m<sup>3</sup>)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2018-06-12</td>
<td align="center">a</td>
<td align="center"><span class="math inline">\(294.05\)</span></td>
<td align="center"><span class="math inline">\({101.1}\times 10^{3}\)</span></td>
<td align="center"><span class="math inline">\(287\)</span></td>
<td align="center"><span class="math inline">\(1.1980\)</span></td>
</tr>
<tr class="even">
<td align="left">2018-06-13</td>
<td align="center">b</td>
<td align="center"><span class="math inline">\(294.15\)</span></td>
<td align="center"><span class="math inline">\({101.0}\times 10^{3}\)</span></td>
<td align="center"><span class="math inline">\(287\)</span></td>
<td align="center"><span class="math inline">\(1.1964\)</span></td>
</tr>
<tr class="odd">
<td align="left">2018-06-14</td>
<td align="center">c</td>
<td align="center"><span class="math inline">\(294.65\)</span></td>
<td align="center"><span class="math inline">\({101.1}\times 10^{3}\)</span></td>
<td align="center"><span class="math inline">\(287\)</span></td>
<td align="center"><span class="math inline">\(1.1955\)</span></td>
</tr>
<tr class="even">
<td align="left">2018-06-15</td>
<td align="center">d</td>
<td align="center"><span class="math inline">\(293.35\)</span></td>
<td align="center"><span class="math inline">\({101.0}\times 10^{3}\)</span></td>
<td align="center"><span class="math inline">\(287\)</span></td>
<td align="center"><span class="math inline">\(1.1996\)</span></td>
</tr>
<tr class="odd">
<td align="left">2018-06-16</td>
<td align="center">e</td>
<td align="center"><span class="math inline">\(293.85\)</span></td>
<td align="center"><span class="math inline">\({101.1}\times 10^{3}\)</span></td>
<td align="center"><span class="math inline">\(287\)</span></td>
<td align="center"><span class="math inline">\(1.1988\)</span></td>
</tr>
</tbody>
</table>
</div>
<div id="conclusion" class="section level2">
<h2>Conclusion</h2>
<p>These two functions provide the means for consistently rendering numbers with the desired number of significant digits, including trailing zeros, and align them in output tables without affecting character data in the same data frame.</p>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
